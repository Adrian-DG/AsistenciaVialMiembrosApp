"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1536],{1536:(z,p,s)=>{s.r(p),s.d(p,{DashboardModule:()=>j});var m=s(6895),t=s(4556),d=s(1407),g=s(655),l=s(433),e=s(8256),A=s(5045),_=s(2542),f=s(529),h=s(1135),C=s(9601);let Z=(()=>{class o extends C.M{constructor(n,i){super(n),this.$http=n,this.$router=i,this.asistenciasSource=new h.X([]),this.asistencias$=this.asistenciasSource.asObservable(),this.contadorAsistenciasSource=new h.X({totalAccidentes:0,totalAsistencias:0}),this.contadorAsistencias$=this.contadorAsistenciasSource.asObservable(),this.endPoint+="/asistencias"}createAsistance(n){console.log("Enter asistance service"),this.$http.post(`${this.endPoint}/create`,n).subscribe(i=>{i&&(console.log("Se creo la asistencia"),this.$router.navigate(["dashboard"]))})}getAsistenciasUnidad(n){this.$http.get(`${this.endPoint}/all/${n}`).subscribe(i=>{console.log(i),this.asistenciasSource.next(i)})}getTotalAsistenciasUnidad(n){const i=(new f.LE).set("unidadMiembroId",n);this.$http.get(`${this.endPoint}/contador`,{params:i}).subscribe(a=>this.contadorAsistenciasSource.next(a))}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(f.eN),e.LFG(d.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function b(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function T(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function v(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function I(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function U(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function M(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function y(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}let q=(()=>{class o{constructor(n,i,a,r){this.$fb=n,this._cache=i,this._auth=a,this._asistencia=r,this.unidadMiembroId=0,this.asistanceForm=this.$fb.group({identificacion:["",[l.kI.required,l.kI.minLength(11)]],nombreCiudadano:[""],telefono:[""],vehiculoTipoId:[],vehiculoColorId:[],vehiculoModeloId:[],vehiculoMarcaId:[],latitud:[""],longitud:[""],municipioId:[],provinciaId:[],unidadMiembroId:[0],tipoAsistenciaId:[0],comentarios:[""],reportadoPor:[]})}ngOnInit(){this.getUnitMemberId()}getUnitMemberId(){return(0,g.mG)(this,void 0,void 0,function*(){return(yield this._auth.getStorageData())[1]})}createAsistance(){return(0,g.mG)(this,void 0,void 0,function*(){let n=this.asistanceForm.value;n.unidadMiembroId=yield this.getUnitMemberId(),console.log(n),this._asistencia.createAsistance(n)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(l.qu),e.Y36(A.Q),e.Y36(_.e),e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asistance-form"]],decls:82,vars:29,consts:[["color","primary"],["slot","start"],["icon","caret-back"],[3,"formGroup","ngSubmit"],["formControlName","reportadoPor"],[1,"radio-col"],[3,"value"],["counter","true"],["position","floating"],["formControlName","identificacion",3,"maxlength"],["formControlName","nombreCiudadano"],[3,"counter"],["formControlName","telefono","maxlength","10"],["formControlName","vehiculoTipoId","placeholder","Tipo de Vehiculo",3,"click"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["formControlName","vehiculoColorId","placeholder","Seleccionar Color"],["formControlName","vehiculoMarcaId","placeholder","Seleccionar Marca"],["marcaId",""],["formControlName","vehiculoModeloId","placeholder","Seleccionar Modelo"],["formControlName","provinciaId","placeholder","Seleccionar Provincia"],["provinciaId",""],["formControlName","municipioId","placeholder","Seleccionar Municipio"],["categoriaAsistencia",""],["formControlName","tipoAsistenciaId","placeholder","Seleccionar Tipo Asistencia"],["formControlName","comentarios","placeholder","Escribe cualquier otro detalle"],["expand","block","type","submit","color","primary",3,"disabled"]],template:function(n,i){if(1&n){const a=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Formulario Asistencia"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),e._uU(10,"Formulario Asistencia"),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12,"El siguiente formulario es para reportar las incidencias en el campo."),e.qZA()(),e.TgZ(13,"ion-card-content")(14,"form",3),e.NdJ("ngSubmit",function(){return i.createAsistance()}),e.TgZ(15,"ion-radio-group",4)(16,"ion-row")(17,"ion-col",5),e._UZ(18,"ion-radio",6),e.TgZ(19,"ion-label"),e._uU(20,"Reconocimiento"),e.qZA()(),e.TgZ(21,"ion-col",5),e._UZ(22,"ion-radio",6),e.TgZ(23,"ion-label"),e._uU(24,"911"),e.qZA()()()(),e.TgZ(25,"ion-item",7)(26,"ion-label",8),e._uU(27,"Identificaci\xf3n Ciudadano"),e.qZA(),e._UZ(28,"ion-input",9),e.qZA(),e.TgZ(29,"ion-item")(30,"ion-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"ion-input",10),e.qZA(),e.TgZ(33,"ion-item",11)(34,"ion-label"),e._uU(35,"Telefono"),e.qZA(),e._UZ(36,"ion-input",12),e.qZA(),e.TgZ(37,"ion-item")(38,"ion-select",13),e.NdJ("click",function(){return i._cache.getResource("VehiculoTipo")}),e.YNc(39,b,2,2,"ion-select-option",14),e.ALo(40,"async"),e.qZA()(),e.TgZ(41,"ion-item",15),e.NdJ("click",function(){return i._cache.getResource("VehiculoColores")}),e.TgZ(42,"ion-select",16),e.YNc(43,T,2,2,"ion-select-option",14),e.ALo(44,"async"),e.qZA()(),e.TgZ(45,"ion-item",15),e.NdJ("click",function(){return i._cache.getResource("VehiculoMarca")}),e.TgZ(46,"ion-select",17,18),e.YNc(48,v,2,2,"ion-select-option",14),e.ALo(49,"async"),e.qZA()(),e.TgZ(50,"ion-item",15),e.NdJ("click",function(){e.CHM(a);const u=e.MAs(47);return e.KtG(i._cache.getResourceById("VehiculoModelo",u.value))}),e.TgZ(51,"ion-select",19),e.YNc(52,I,2,2,"ion-select-option",14),e.ALo(53,"async"),e.qZA()(),e.TgZ(54,"ion-item",15),e.NdJ("click",function(){return i._cache.getResource("provincias")}),e.TgZ(55,"ion-select",20,21),e.YNc(57,U,2,2,"ion-select-option",14),e.ALo(58,"async"),e.qZA()(),e.TgZ(59,"ion-item",15),e.NdJ("click",function(){e.CHM(a);const u=e.MAs(56);return e.KtG(i._cache.getResourceById("municipios",u.value))}),e.TgZ(60,"ion-select",22),e.YNc(61,M,2,2,"ion-select-option",14),e.ALo(62,"async"),e.qZA()(),e.TgZ(63,"ion-radio-group",null,23)(65,"ion-row")(66,"ion-col",5),e._UZ(67,"ion-radio",6),e.TgZ(68,"ion-label"),e._uU(69,"Accidente"),e.qZA()(),e.TgZ(70,"ion-col",5),e._UZ(71,"ion-radio",6),e.TgZ(72,"ion-label"),e._uU(73,"Asistencia"),e.qZA()()()(),e.TgZ(74,"ion-item",15),e.NdJ("click",function(){e.CHM(a);const u=e.MAs(64);return e.KtG(i._cache.getResourceById("TipoAsistencia",u.value))}),e.TgZ(75,"ion-select",24),e.YNc(76,y,2,2,"ion-select-option",14),e.ALo(77,"async"),e.qZA()(),e.TgZ(78,"ion-item"),e._UZ(79,"ion-textarea",25),e.qZA(),e.TgZ(80,"ion-button",26),e._uU(81,"Reportar Asistencia"),e.qZA()()()()()}2&n&&(e.xp6(14),e.Q6J("formGroup",i.asistanceForm),e.xp6(4),e.Q6J("value",2),e.xp6(4),e.Q6J("value",3),e.xp6(6),e.Q6J("maxlength",11),e.xp6(5),e.Q6J("counter",!0),e.xp6(6),e.Q6J("ngForOf",e.lcZ(40,15,i._cache.vehiculoTipos$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(44,17,i._cache.vehiculoColor$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(49,19,i._cache.vehiculoMarca$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(53,21,i._cache.vehiculoModelo$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(58,23,i._cache.provincias$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(62,25,i._cache.municipios$)),e.xp6(6),e.Q6J("value",1),e.xp6(4),e.Q6J("value",2),e.xp6(5),e.Q6J("ngForOf",e.lcZ(77,27,i._cache.tipoAsistencia$)),e.xp6(4),e.Q6J("disabled",!i.asistanceForm.valid))},dependencies:[m.sg,t.oU,t.YG,t.Sm,t.PM,t.FN,t.Zi,t.tO,t.Dq,t.wI,t.W2,t.Gu,t.pK,t.Ie,t.Q$,t.B7,t.se,t.Nd,t.t9,t.n0,t.g2,t.wd,t.sr,t.U5,t.QI,t.j9,t.cs,l._Y,l.JJ,l.JL,l.nD,l.sg,l.u,m.Ov],styles:[".radio-col[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}"]}),o})(),F=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-counter"]],inputs:{counter:"counter"},decls:11,vars:2,consts:[[1,"row"],[1,"col"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Asistencia"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"div",1)(7,"span"),e._uU(8,"Emergencia"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()),2&n){let a,r;e.xp6(5),e.Oqu(null!==(a=null==i.counter?null:i.counter.totalAsistencias)&&void 0!==a?a:0),e.xp6(5),e.Oqu(null!==(r=null==i.counter?null:i.counter.totalAccidentes)&&void 0!==r?r:0)}},styles:[".row[_ngcontent-%COMP%]{padding:.5em;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{width:45%;height:auto;display:flex;flex-direction:column;text-align:center;color:#6e6d6d}"]}),o})(),O=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-member-unit-card"]],inputs:{memberInfo:"memberInfo",counter:"counter"},decls:24,vars:6,consts:[[1,"card-info"],[1,"card-header"],["size","3",1,"icon-col"],["name","car-outline",1,"icon"],["size","9"],[1,"text"],[1,"content"],[3,"counter"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-card",0)(1,"ion-card-header",1)(2,"ion-row")(3,"ion-col",2),e._UZ(4,"ion-icon",3),e.qZA(),e.TgZ(5,"ion-col",4)(6,"ion-card-title",5),e._uU(7,"Datos Unidad"),e.qZA(),e.TgZ(8,"ion-text",5),e._uU(9),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"ion-text",5),e._uU(12),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"ion-text",5),e._uU(15),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"ion-text",5),e._uU(18),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"ion-text",5),e._uU(21),e.qZA()()()(),e.TgZ(22,"ion-card-content",6),e._UZ(23,"app-counter",7),e.qZA()()),2&n&&(e.xp6(9),e.hij("Tramo: ",null==i.memberInfo?null:i.memberInfo.tramo,""),e.xp6(3),e.hij("Den.: ",null==i.memberInfo?null:i.memberInfo.denominacion,""),e.xp6(3),e.hij("Ficha: ",null==i.memberInfo?null:i.memberInfo.ficha," "),e.xp6(3),e.hij("Placa: ",null==i.memberInfo?null:i.memberInfo.placa," "),e.xp6(3),e.hij("Miembro: ",null==i.memberInfo?null:i.memberInfo.miembro,""),e.xp6(2),e.Q6J("counter",i.counter))},dependencies:[t.PM,t.FN,t.Zi,t.Dq,t.wI,t.gu,t.Nd,t.yW,F],styles:[".card-info[_ngcontent-%COMP%]{background-color:#eee}.card-header[_ngcontent-%COMP%]{padding:.5em;display:flex;flex-direction:row;justify-content:space-between;align-items:start}.card-header[_ngcontent-%COMP%]   .icon-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding-top:15%}.card-header[_ngcontent-%COMP%]   .icon-col[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:4rem;border:1px solid rgb(112,112,112);border-radius:.2em}.content[_ngcontent-%COMP%]{padding:.3em;background-color:#dad9d9}.text[_ngcontent-%COMP%]{margin-top:1em;color:#505050;font-weight:700}"]}),o})();function x(o,c){1&o&&e._UZ(0,"ion-icon",6)}function J(o,c){1&o&&e._UZ(0,"ion-icon",7)}const N=function(o,c){return{red:o,green:c}};let Q=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asistencia-card"]],inputs:{item:"item"},decls:17,vars:11,consts:[[2,"width","100%"],["size","2"],["name","car-sport",1,"category-icon",3,"ngClass"],["size","8"],["class","green status-icon","name","checkmark-done-circle",4,"ngIf"],["class","red status-icon","name","alert-circle",4,"ngIf"],["name","checkmark-done-circle",1,"green","status-icon"],["name","alert-circle",1,"red","status-icon"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-card",0)(1,"ion-card-header")(2,"ion-row")(3,"ion-col",1),e._UZ(4,"ion-icon",2),e.qZA(),e.TgZ(5,"ion-col",3)(6,"ion-card-title"),e._uU(7),e.qZA()(),e.TgZ(8,"ion-col",1),e.YNc(9,x,1,0,"ion-icon",4),e.YNc(10,J,1,0,"ion-icon",5),e.qZA()()(),e.TgZ(11,"ion-card-content")(12,"ion-text"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"ion-text"),e._uU(16),e.qZA()()()),2&n&&(e.xp6(4),e.Q6J("ngClass",e.WLB(8,N,1==i.item.categoriaAsistencia,2==i.item.categoriaAsistencia)),e.xp6(3),e.Oqu(i.item.tipoAsistencia),e.xp6(2),e.Q6J("ngIf",i.item.completada),e.xp6(1),e.Q6J("ngIf",!i.item.completada),e.xp6(3),e.AsE("Nombre: ",i.item.nombreCiudadano," | ",i.item.reportadoPor,""),e.xp6(3),e.AsE("Ubicacion: ",i.item.municipio,", ",i.item.provincia,""))},dependencies:[m.mk,m.O5,t.PM,t.FN,t.Zi,t.Dq,t.wI,t.gu,t.Nd,t.yW],styles:[".category-icon[_ngcontent-%COMP%]{font-size:2rem;border:1px solid gainsboro;border-radius:.1em;padding:.1em}.status-icon[_ngcontent-%COMP%]{font-size:2rem}.red[_ngcontent-%COMP%]{color:#e23232}.green[_ngcontent-%COMP%]{color:#25b325}"]}),o})();function P(o,c){if(1&o&&(e.TgZ(0,"ion-item"),e._UZ(1,"app-asistencia-card",12),e.qZA()),2&o){const n=c.$implicit;e.xp6(1),e.Q6J("item",n)}}function $(o,c){if(1&o&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label",10),e._uU(3,"Asistencias de hoy"),e.qZA()(),e.YNc(4,P,2,1,"ion-item",11),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(4),e.Q6J("ngForOf",n)}}function S(o,c){1&o&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label",10),e._uU(3,"No hay registros"),e.qZA()()())}function w(o,c){if(1&o&&(e.TgZ(0,"div",7),e.YNc(1,$,5,1,"ion-list",8),e.YNc(2,S,4,0,"ng-template",null,9,e.W1O),e.qZA()),2&o){const n=c.ngIf,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",n.length>0)("ngIfElse",i)}}const Y=function(){return["create"]},k=[{path:"create",component:q},{path:"",component:(()=>{class o{constructor(n,i){this._auth=n,this._asistencias=i,this.infoUser=null}ngOnInit(){this._auth.getStorageData().then(n=>{console.log(n),this.infoUser={denominacion:n[0],unidadMiembroId:n[1],ficha:n[2],miembro:n[3],placa:n[4],tramo:n[5]}})}ngAfterViewInit(){var n,i;null!==(n=this.infoUser)&&void 0!==n&&n.ficha&&this._asistencias.getAsistenciasUnidad(null===(i=this.infoUser)||void 0===i?void 0:i.ficha.toString())}handleRefresh(n){setTimeout(()=>{var i,a;!(null===(i=this.infoUser)||void 0===i)&&i.ficha&&this._asistencias.getAsistenciasUnidad(null===(a=this.infoUser)||void 0===a?void 0:a.ficha.toString()),n.target.complete()},2e3)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(_.e),e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-index"]],decls:14,vars:9,consts:[["color","primary"],["slot","fixed",3,"ionRefresh"],[3,"memberInfo","counter"],["class","list",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"routerLink"],["name","add"],[1,"list"],[4,"ngIf","ngIfElse"],["emptyList",""],[1,"list-title"],[4,"ngFor","ngForOf"],[2,"width","100%",3,"item"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e._uU(3,"Inicio"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-refresher",1),e.NdJ("ionRefresh",function(r){return i.handleRefresh(r)}),e._UZ(6,"ion-refresher-content"),e.qZA(),e._UZ(7,"app-member-unit-card",2),e.ALo(8,"async"),e.YNc(9,w,4,2,"div",3),e.ALo(10,"async"),e.TgZ(11,"ion-fab",4)(12,"ion-fab-button",5),e._UZ(13,"ion-icon",6),e.qZA()()()),2&n&&(e.xp6(7),e.Q6J("memberInfo",i.infoUser)("counter",e.lcZ(8,4,i._asistencias.contadorAsistencias$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,6,i._asistencias.asistencias$)),e.xp6(3),e.Q6J("routerLink",e.DdM(8,Y)))},dependencies:[m.sg,m.O5,d.rH,t.W2,t.IJ,t.W4,t.Gu,t.gu,t.Ie,t.Q$,t.q_,t.yh,t.nJ,t.Wo,t.wd,t.sr,t.YI,O,Q,m.Ov],styles:[".list[_ngcontent-%COMP%]{height:55%;padding:1em;overflow-y:auto}.list-title[_ngcontent-%COMP%]{color:#636363;font-weight:500;font-size:1.1rem;text-align:center}"]}),o})(),pathMatch:"full"}];let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(k),d.Bz]}),o})();var R=s(6459),D=s(2194);let j=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,L,t.Pc,l.UX,R.p,D.H]}),o})()}}]);