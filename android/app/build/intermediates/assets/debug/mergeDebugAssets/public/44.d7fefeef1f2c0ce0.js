"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[44],{44:(D,p,a)=>{a.r(p),a.d(p,{DashboardModule:()=>R});var m=a(6895),t=a(4556),d=a(1407),_=a(655),l=a(433),e=a(8256),A=a(5045),g=a(2542),f=a(529),h=a(1135),b=a(9601);let Z=(()=>{class o extends b.M{constructor(n,i){super(n),this.$http=n,this.$router=i,this.asistenciasSource=new h.X([]),this.asistencias$=this.asistenciasSource.asObservable(),this.contadorAsistenciasSource=new h.X({totalAccidentes:0,totalAsistencias:0}),this.contadorAsistencias$=this.contadorAsistenciasSource.asObservable(),this.endPoint+="/asistencias"}createAsistance(n){console.log("Enter asistance service"),this.$http.post(`${this.endPoint}/create`,n).subscribe(i=>{i&&(console.log("Se creo la asistencia"),this.$router.navigate(["dashboard"]))})}getAsistenciasUnidad(n){this.$http.get(`${this.endPoint}/all/${n}`).subscribe(i=>{console.log(i),this.asistenciasSource.next(i)})}getTotalAsistenciasUnidad(n){const i=(new f.LE).set("unidadMiembroId",n);this.$http.get(`${this.endPoint}/contador`,{params:i}).subscribe(s=>this.contadorAsistenciasSource.next(s))}}return o.\u0275fac=function(n){return new(n||o)(e.LFG(f.eN),e.LFG(d.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function T(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function C(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function v(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function I(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function U(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function q(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}function y(o,c){if(1&o&&(e.TgZ(0,"ion-select-option",6),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.Q6J("value",n.id),e.xp6(1),e.Oqu(n.nombre)}}let M=(()=>{class o{constructor(n,i,s,r){this.$fb=n,this._cache=i,this._auth=s,this._asistencia=r,this.unidadMiembroId=0,this.asistanceForm=this.$fb.group({identificacion:["",[l.kI.required,l.kI.minLength(11)]],nombreCiudadano:[""],edad:[0,[l.kI.min(18)]],telefono:[""],vehiculoTipoId:[],vehiculoColorId:[],vehiculoModeloId:[],vehiculoMarcaId:[],latitud:[""],longitud:[""],municipioId:[],provinciaId:[],unidadMiembroId:[0],tipoAsistenciaId:[0],comentarios:[""],reportadoPor:[]})}ngOnInit(){this.getUnitMemberId()}getUnitMemberId(){return(0,_.mG)(this,void 0,void 0,function*(){return(yield this._auth.getStorageData())[1]})}createAsistance(){return(0,_.mG)(this,void 0,void 0,function*(){let n=this.asistanceForm.value;n.unidadMiembroId=yield this.getUnitMemberId(),console.log(n),this._asistencia.createAsistance(n)})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(l.qu),e.Y36(A.Q),e.Y36(g.e),e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asistance-form"]],decls:88,vars:29,consts:[["color","primary"],["slot","start"],["icon","caret-back"],[3,"formGroup","ngSubmit"],["formControlName","reportadoPor"],[1,"radio-col"],[3,"value"],["counter","true"],["position","floating"],["formControlName","identificacion",3,"maxlength"],["formControlName","nombreCiudadano"],["type","number","formControlName","edad"],[3,"counter"],["formControlName","telefono","maxlength","10"],["formControlName","vehiculoTipoId","placeholder","Tipo de Vehiculo",3,"click"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],["formControlName","vehiculoColorId","placeholder","Seleccionar Color"],["formControlName","vehiculoMarcaId","placeholder","Seleccionar Marca"],["marcaId",""],["formControlName","vehiculoModeloId","placeholder","Seleccionar Modelo"],["formControlName","provinciaId","placeholder","Seleccionar Provincia"],["provinciaId",""],["formControlName","municipioId","placeholder","Seleccionar Municipio"],["categoriaAsistencia",""],["formControlName","tipoAsistenciaId","placeholder","Seleccionar Tipo Asistencia"],["formControlName","comentarios","placeholder","Escribe cualquier otro detalle"],["expand","block","type","submit","color","primary",3,"disabled"]],template:function(n,i){if(1&n){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Formulario Asistencia"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),e._uU(10,"Formulario Asistencia"),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12,"El siguiente formulario es para reportar las incidencias en el campo."),e.qZA()(),e.TgZ(13,"ion-card-content")(14,"form",3),e.NdJ("ngSubmit",function(){return i.createAsistance()}),e.TgZ(15,"ion-radio-group",4)(16,"ion-row")(17,"ion-col",5),e._UZ(18,"ion-radio",6),e.TgZ(19,"ion-label"),e._uU(20,"Reconocimiento"),e.qZA()(),e.TgZ(21,"ion-col",5),e._UZ(22,"ion-radio",6),e.TgZ(23,"ion-label"),e._uU(24,"911"),e.qZA()()()(),e.TgZ(25,"ion-item",7)(26,"ion-label",8),e._uU(27,"Identificaci\xf3n"),e.qZA(),e._UZ(28,"ion-input",9),e.qZA(),e.TgZ(29,"ion-item")(30,"ion-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"ion-input",10),e.qZA(),e.TgZ(33,"ion-item")(34,"ion-label"),e._uU(35,"Edad"),e.qZA(),e._UZ(36,"ion-input",11),e.qZA(),e.TgZ(37,"ion-item",12)(38,"ion-label"),e._uU(39,"Telefono"),e.qZA(),e._UZ(40,"ion-input",13),e.qZA(),e.TgZ(41,"ion-item")(42,"ion-select",14),e.NdJ("click",function(){return i._cache.getResource("VehiculoTipo")}),e.YNc(43,T,2,2,"ion-select-option",15),e.ALo(44,"async"),e.qZA()(),e.TgZ(45,"ion-item",16),e.NdJ("click",function(){return i._cache.getResource("VehiculoColores")}),e.TgZ(46,"ion-select",17),e.YNc(47,C,2,2,"ion-select-option",15),e.ALo(48,"async"),e.qZA()(),e.TgZ(49,"ion-item",16),e.NdJ("click",function(){return i._cache.getResource("VehiculoMarca")}),e.TgZ(50,"ion-select",18,19),e.YNc(52,v,2,2,"ion-select-option",15),e.ALo(53,"async"),e.qZA()(),e.TgZ(54,"ion-item",16),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(51);return e.KtG(i._cache.getResourceById("VehiculoModelo",u.value))}),e.TgZ(55,"ion-select",20),e.YNc(56,I,2,2,"ion-select-option",15),e.ALo(57,"async"),e.qZA()(),e.TgZ(58,"ion-item",16),e.NdJ("click",function(){return i._cache.getResource("provincias")}),e.TgZ(59,"ion-select",21,22),e.YNc(61,U,2,2,"ion-select-option",15),e.ALo(62,"async"),e.qZA()(),e.TgZ(63,"ion-item",16),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(60);return e.KtG(i._cache.getResourceById("municipios",u.value))}),e.TgZ(64,"ion-select",23),e.YNc(65,q,2,2,"ion-select-option",15),e.ALo(66,"async"),e.qZA()(),e.TgZ(67,"ion-radio-group",null,24)(69,"ion-row")(70,"ion-col",5),e._UZ(71,"ion-radio",6),e.TgZ(72,"ion-label"),e._uU(73,"Accidente"),e.qZA()(),e.TgZ(74,"ion-col",5),e._UZ(75,"ion-radio",6),e.TgZ(76,"ion-label"),e._uU(77,"Asistencia"),e.qZA()()()(),e.TgZ(78,"ion-item",16),e.NdJ("click",function(){e.CHM(s);const u=e.MAs(68);return e.KtG(i._cache.getResourceById("TipoAsistencia",u.value))}),e.TgZ(79,"ion-select",25),e.YNc(80,y,2,2,"ion-select-option",15),e.ALo(81,"async"),e.qZA()(),e.TgZ(82,"ion-item")(83,"ion-label"),e._uU(84,"Comentarios"),e.qZA(),e._UZ(85,"ion-textarea",26),e.qZA(),e.TgZ(86,"ion-button",27),e._uU(87,"Reportar Asistencia"),e.qZA()()()()()}2&n&&(e.xp6(14),e.Q6J("formGroup",i.asistanceForm),e.xp6(4),e.Q6J("value",2),e.xp6(4),e.Q6J("value",3),e.xp6(6),e.Q6J("maxlength",11),e.xp6(9),e.Q6J("counter",!0),e.xp6(6),e.Q6J("ngForOf",e.lcZ(44,15,i._cache.vehiculoTipos$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(48,17,i._cache.vehiculoColor$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(53,19,i._cache.vehiculoMarca$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(57,21,i._cache.vehiculoModelo$)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(62,23,i._cache.provincias$)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(66,25,i._cache.municipios$)),e.xp6(6),e.Q6J("value",1),e.xp6(4),e.Q6J("value",2),e.xp6(5),e.Q6J("ngForOf",e.lcZ(81,27,i._cache.tipoAsistencia$)),e.xp6(6),e.Q6J("disabled",!i.asistanceForm.valid))},dependencies:[m.sg,t.oU,t.YG,t.Sm,t.PM,t.FN,t.Zi,t.tO,t.Dq,t.wI,t.W2,t.Gu,t.pK,t.Ie,t.Q$,t.B7,t.se,t.Nd,t.t9,t.n0,t.g2,t.wd,t.sr,t.as,t.U5,t.QI,t.j9,t.cs,l._Y,l.JJ,l.JL,l.nD,l.sg,l.u,m.Ov],styles:[".radio-col[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}"]}),o})(),x=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-counter"]],inputs:{counter:"counter"},decls:11,vars:2,consts:[[1,"row"],[1,"col"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Asistencia"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"div",1)(7,"span"),e._uU(8,"Emergencia"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()),2&n){let s,r;e.xp6(5),e.Oqu(null!==(s=null==i.counter?null:i.counter.totalAsistencias)&&void 0!==s?s:0),e.xp6(5),e.Oqu(null!==(r=null==i.counter?null:i.counter.totalAccidentes)&&void 0!==r?r:0)}},styles:[".row[_ngcontent-%COMP%]{padding:.5em;display:flex;flex-direction:row;justify-content:space-evenly;align-items:center}.row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{width:45%;height:auto;display:flex;flex-direction:column;text-align:center;color:#6e6d6d}"]}),o})(),F=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-member-unit-card"]],inputs:{memberInfo:"memberInfo",counter:"counter"},decls:20,vars:6,consts:[[1,"card-header"],[1,"unit-icon"],["name","car-outline",1,"icon"],[1,"unit-info"],[1,"text"],[3,"counter"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-header",0)(2,"div",1),e._UZ(3,"ion-icon",2),e.qZA(),e.TgZ(4,"div",3)(5,"ion-card-title",4),e._uU(6,"Datos Unidad"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"ion-card-subtitle",4),e._uU(9),e.qZA(),e.TgZ(10,"ion-text",4),e._uU(11),e.qZA(),e.TgZ(12,"ion-text",4),e._uU(13),e.qZA(),e.TgZ(14,"ion-text",4),e._uU(15),e.qZA(),e.TgZ(16,"ion-text",4),e._uU(17),e.qZA()()(),e.TgZ(18,"ion-card-content"),e._UZ(19,"app-counter",5),e.qZA()()),2&n&&(e.xp6(9),e.hij("Tramo: ",null==i.memberInfo?null:i.memberInfo.tramo,""),e.xp6(2),e.hij("Den.: ",null==i.memberInfo?null:i.memberInfo.denominacion,""),e.xp6(2),e.hij("Ficha: ",null==i.memberInfo?null:i.memberInfo.ficha," "),e.xp6(2),e.hij("Placa: ",null==i.memberInfo?null:i.memberInfo.placa," "),e.xp6(2),e.hij("Miembro: ",null==i.memberInfo?null:i.memberInfo.miembro,""),e.xp6(2),e.Q6J("counter",i.counter))},dependencies:[t.PM,t.FN,t.Zi,t.tO,t.Dq,t.gu,t.yW,x],styles:["ion-card[_ngcontent-%COMP%]{background-color:#dcdcdc}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   .unit-icon[_ngcontent-%COMP%]{width:30%;height:auto}.card-header[_ngcontent-%COMP%]   .unit-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:5.5rem;border:1px solid rgb(68,67,67);border-radius:.1em}.card-header[_ngcontent-%COMP%]   .unit-info[_ngcontent-%COMP%]{width:70%;height:auto;display:flex;flex-direction:column;justify-content:start;align-items:start}.text[_ngcontent-%COMP%]{margin-top:1em;color:#4e4e4e;font-weight:700}"]}),o})();function O(o,c){1&o&&e._UZ(0,"ion-icon",15)}function J(o,c){1&o&&e._UZ(0,"ion-icon",16)}function N(o,c){1&o&&(e.TgZ(0,"ion-button",17),e._uU(1,"Iniciar Asistencia"),e.qZA())}function Q(o,c){if(1&o&&(e.TgZ(0,"ion-item")(1,"ion-card",9)(2,"ion-card-header")(3,"ion-row")(4,"ion-col",10)(5,"ion-card-title"),e._uU(6),e.qZA(),e.TgZ(7,"ion-card-subtitle"),e._uU(8),e.qZA()(),e.TgZ(9,"ion-col",11),e.YNc(10,O,1,0,"ion-icon",12),e.YNc(11,J,1,0,"ion-icon",13),e.qZA()()(),e.TgZ(12,"ion-card-content")(13,"ion-text"),e._uU(14),e.qZA(),e.YNc(15,N,2,0,"ion-button",14),e.qZA()()()),2&o){const n=c.$implicit;e.xp6(6),e.Oqu(n.tipoAsistencia),e.xp6(2),e.AsE("",n.identificacion," | ",n.nombreCiudadano,""),e.xp6(2),e.Q6J("ngIf",n.completada),e.xp6(1),e.Q6J("ngIf",!n.completada),e.xp6(3),e.AsE("Ubicacion: ",n.municipio,", ",n.provincia,""),e.xp6(1),e.Q6J("ngIf",!n.completada)}}function $(o,c){if(1&o&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e._uU(3,"Asistencias de hoy"),e.qZA()(),e.YNc(4,Q,16,8,"ion-item",8),e.ALo(5,"async"),e.qZA()),2&o){const n=c.ngIf;e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,n))}}function P(o,c){1&o&&(e.TgZ(0,"ion-card")(1,"ion-card-content")(2,"h4"),e._uU(3,"No hay asignaciones pendientes"),e.qZA()()())}const S=function(){return["create"]},Y=[{path:"create",component:M},{path:"",component:(()=>{class o{constructor(n,i){this._auth=n,this._asistencias=i,this.infoUser=null}ngOnInit(){this._auth.getStorageData().then(n=>{console.log(n),this.infoUser={denominacion:n[0],unidadMiembroId:n[1],ficha:n[2],miembro:n[3],placa:n[4],tramo:n[5]}})}ngAfterViewInit(){this._asistencias.getAsistenciasUnidad("1234")}handleRefresh(n){setTimeout(()=>{this._asistencias.getAsistenciasUnidad("1234"),n.target.complete()},2e3)}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(g.e),e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-index"]],decls:16,vars:8,consts:[["slot","fixed",3,"ionRefresh"],[3,"memberInfo","counter"],[1,"list"],[4,"ngIf","ngIfElse"],["emptyList",""],["slot","fixed","vertical","bottom","horizontal","end"],[3,"routerLink"],["name","add"],[4,"ngFor","ngForOf"],[2,"width","100%"],["size","10"],["size","2"],["style","\n\t\t\t\t\t\t\t\t\t\tcolor: rgb(24, 187, 24);\n\t\t\t\t\t\t\t\t\t\tfont-size: 2.5rem;\n\t\t\t\t\t\t\t\t\t","name","checkmark-done-circle",4,"ngIf"],["style","\n\t\t\t\t\t\t\t\t\t\tcolor: rgb(202, 68, 68);\n\t\t\t\t\t\t\t\t\t\tfont-size: 2.5rem;\n\t\t\t\t\t\t\t\t\t","name","alert-circle",4,"ngIf"],["style","width: 100%","color","primary",4,"ngIf"],["name","checkmark-done-circle",2,"color","rgb(24, 187, 24)","font-size","2.5rem"],["name","alert-circle",2,"color","rgb(202, 68, 68)","font-size","2.5rem"],["color","primary",2,"width","100%"]],template:function(n,i){if(1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Inicio"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"ion-refresher",0),e.NdJ("ionRefresh",function(r){return i.handleRefresh(r)}),e._UZ(6,"ion-refresher-content"),e.qZA(),e._UZ(7,"app-member-unit-card",1),e.ALo(8,"async"),e.TgZ(9,"div",2),e.YNc(10,$,6,3,"ion-list",3),e.YNc(11,P,4,0,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(13,"ion-fab",5)(14,"ion-fab-button",6),e._UZ(15,"ion-icon",7),e.qZA()()()),2&n){const s=e.MAs(12);e.xp6(7),e.Q6J("memberInfo",i.infoUser)("counter",e.lcZ(8,5,i._asistencias.contadorAsistencias$)),e.xp6(3),e.Q6J("ngIf",i._asistencias.asistencias$)("ngIfElse",s),e.xp6(4),e.Q6J("routerLink",e.DdM(7,S))}},dependencies:[m.sg,m.O5,d.rH,t.YG,t.PM,t.FN,t.Zi,t.tO,t.Dq,t.wI,t.W2,t.IJ,t.W4,t.Gu,t.gu,t.Ie,t.Q$,t.q_,t.yh,t.nJ,t.Wo,t.Nd,t.yW,t.wd,t.sr,t.YI,F,m.Ov],styles:[".list[_ngcontent-%COMP%]{height:55%;padding:1em;overflow-y:auto}"]}),o})(),pathMatch:"full"}];let w=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(Y),d.Bz]}),o})();var k=a(6459),L=a(2194);let R=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,w,t.Pc,l.UX,k.p,L.H]}),o})()}}]);